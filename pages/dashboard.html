<?php
include '../db/sessionCheck.php';
?>  

<!DOCTYPE html>
<html lang="en">

<?php include '../components/headpages.html'; ?>
<link rel="stylesheet" href="../css/landing.css">

<header>
    <h1 class="dashTxt">Dashboard</h1>
</header>

<!-- Logout Button -->
<div class="logout">
    <form action="../API/logout.php" method="post">
        <button type="submit">Logout</button>
    </form>
</div>

<body>
    <main>
        <div class="card-container">
            <div class="reg-data-table" id="reg-data-table">
                <h3>Registered Users</h3>
            </div>

            <div class="active-user-data" id="active-user-data">
                <h3>Active Users</h3>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Fetch and render Registered Users
            fetch('../API/dashboard/registeredUsers.php')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('reg-data-table').innerHTML += data;
                })
                .catch(error => console.error('Error fetching registered users:', error));

            // Fetch and render Active Users
            fetch('../API/dashboard/activeUsers.php')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('active-user-data').innerHTML += data;
                })
                .catch(error => console.error('Error fetching active users:', error));
        });
    </script>
</body>
</html>
